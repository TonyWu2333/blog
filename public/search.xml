<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>搭建国内可访问的ai网页端</title>
      <link href="/2024/04/03/%E6%90%AD%E5%BB%BA%E5%9B%BD%E5%86%85%E5%8F%AF%E8%AE%BF%E9%97%AE%E7%9A%84ai%E7%BD%91%E9%A1%B5%E7%AB%AF/"/>
      <url>/2024/04/03/%E6%90%AD%E5%BB%BA%E5%9B%BD%E5%86%85%E5%8F%AF%E8%AE%BF%E9%97%AE%E7%9A%84ai%E7%BD%91%E9%A1%B5%E7%AB%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="搭建国内可访问的ai网页端"><a href="#搭建国内可访问的ai网页端" class="headerlink" title="搭建国内可访问的ai网页端"></a>搭建国内可访问的ai网页端</h1><p>各个大厂的AI大家想必应该都已经体验过了。但当我们的亲朋好友想使用ai时，就比较麻烦了。所以这里提供一个快速自建ai网页端的方案，能让朋友不用科学上网也能体验到国外的大模型。</p><h2 id="Vercel部署网页"><a href="#Vercel部署网页" class="headerlink" title="Vercel部署网页"></a>Vercel部署网页</h2><p>如果你有openai的api额度，可以创建一个api key。没有openai的话，google的gemini或其他模型的api key也可以。</p><p>部署非常简单，创建仓库后填一下OPENAI_API_KEY和CODE（安全密码，可选）即可</p><p><img src="https://s2.loli.net/2024/04/03/SQ2ueCkZ97WGTib.png" class="lazyload placeholder" data-srcset="https://s2.loli.net/2024/04/03/SQ2ueCkZ97WGTib.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><p>点击deploy，等待几分钟后，网页便部署好了</p><h2 id="添加GOOGLE-API-KEY"><a href="#添加GOOGLE-API-KEY" class="headerlink" title="添加GOOGLE API KEY"></a>添加GOOGLE API KEY</h2><p>在setting中的environment variables中添加key（密钥名称GOOGLE_API_KEY）和value（你的密钥），点击save。</p><p><img src="https://s2.loli.net/2024/04/03/Leyl84fGHIKBUYT.png" class="lazyload placeholder" data-srcset="https://s2.loli.net/2024/04/03/Leyl84fGHIKBUYT.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><h2 id="域名绑定"><a href="#域名绑定" class="headerlink" title="域名绑定"></a>域名绑定</h2><p>在settings-&gt;domain中添加你的域名，然后在你购买域名的平台cname解析到vercel给你显示的地址。<br>在deployment中点击redeploy重新部署网页</p><h2 id="开始使用"><a href="#开始使用" class="headerlink" title="开始使用"></a>开始使用</h2><p>在登陆输入刚刚设置的code</p><p><img src="https://s2.loli.net/2024/04/03/UhR3l4pF5LADJWY.png" class="lazyload placeholder" data-srcset="https://s2.loli.net/2024/04/03/UhR3l4pF5LADJWY.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><p>登陆后可以在设置中将模型改为google的gemini</p><p><img src="https://s2.loli.net/2024/04/03/T6ocMVp57g9yUbz.png" class="lazyload placeholder" data-srcset="https://s2.loli.net/2024/04/03/T6ocMVp57g9yUbz.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><p>之后就可用开始愉快使用啦！</p>]]></content>
      
      
      
        <tags>
            
            <tag> vercel ai </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用beekeeper远程连接mysql数据库</title>
      <link href="/2024/04/01/%E4%BD%BF%E7%94%A8beekeeper%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5mysql%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
      <url>/2024/04/01/%E4%BD%BF%E7%94%A8beekeeper%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5mysql%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h1 id="使用beekeeper远程连接mysql数据库"><a href="#使用beekeeper远程连接mysql数据库" class="headerlink" title="使用beekeeper远程连接mysql数据库"></a>使用beekeeper远程连接mysql数据库</h1><p>首先更新一下软件包列表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure><p>出现了几个无法下载</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">命中:1 http://security.ubuntu.com/ubuntu xenial-security InRelease</span><br><span class="line">获取:2 http://mirrors.tuna.tsinghua.edu.cn/ubuntu xenial InRelease [10.3 kB]</span><br><span class="line">错误:2 http://mirrors.tuna.tsinghua.edu.cn/ubuntu xenial InRelease</span><br><span class="line">  明文签署文件不可用，结果为‘NOSPLIT’（您的网络需要认证吗？）</span><br><span class="line">获取:3 http://mirrors.tuna.tsinghua.edu.cn/ubuntu xenial-updates InRelease [10.3 kB]</span><br><span class="line">错误:3 http://mirrors.tuna.tsinghua.edu.cn/ubuntu xenial-updates InRelease</span><br><span class="line">  明文签署文件不可用，结果为‘NOSPLIT’（您的网络需要认证吗？）</span><br><span class="line">获取:4 http://mirrors.tuna.tsinghua.edu.cn/ubuntu xenial-backports InRelease [10.3 kB]</span><br><span class="line">错误:4 http://mirrors.tuna.tsinghua.edu.cn/ubuntu xenial-backports InRelease</span><br><span class="line">  明文签署文件不可用，结果为‘NOSPLIT’（您的网络需要认证吗？）</span><br><span class="line">已下载 31.0 kB，耗时 1秒 (26.2 kB/s)</span><br><span class="line">正在读取软件包列表... 完成</span><br><span class="line">E: 无法下载 http://cn.archive.ubuntu.com/ubuntu/dists/xenial/InRelease  明文签署文件不可用，结果为‘NOSPLIT’（您的网络需要认证吗？）</span><br><span class="line">E: 无法下载 http://cn.archive.ubuntu.com/ubuntu/dists/xenial-updates/InRelease  明文签署文件不可用，结果为‘NOSPLIT’（您的网络需要认证吗？）</span><br><span class="line">E: 无法下载 http://cn.archive.ubuntu.com/ubuntu/dists/xenial-backports/InRelease  明文签署文件不可用，结果为‘NOSPLIT’（您的网络需要认证吗？）</span><br><span class="line">E: 部分索引文件下载失败。如果忽略它们，那将转而使用旧的索引文件。</span><br></pre></td></tr></table></figure><p>因为是刚装的虚拟机，所以还没有配置过apt源</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class="line">cd /etc/apt</span><br><span class="line">vim sources.list</span><br></pre></td></tr></table></figure><p>把源替换成阿里源、清华源或中科大源。这里我选择了阿里源</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#  阿里源</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</span><br></pre></td></tr></table></figure><p>安装mysql-server</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install mysql-server</span><br></pre></td></tr></table></figure><p>启动mysql</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/mysql start</span><br><span class="line">[ ok ] Starting mysql (via systemctl): mysql.service.</span><br></pre></td></tr></table></figure><p>查看mysql版本验证是否安装成功</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql --version</span><br><span class="line">mysql  Ver 14.14 Distrib 5.7.42, for Linux (x86_64) using  EditLine wrapper</span><br></pre></td></tr></table></figure><p>进入mysql</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql</span><br></pre></td></tr></table></figure><p>创建一个新的用户并配置密码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER &#x27;tony&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;yourpasswd&#x27;;</span><br></pre></td></tr></table></figure><p>查看用户表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SELECT User, Host, authentication_string FROM mysql.user;</span><br><span class="line">+------------------+-----------+-------------------------------------------+</span><br><span class="line">| User             | Host      | authentication_string                     |</span><br><span class="line">+------------------+-----------+-------------------------------------------+</span><br><span class="line">| root             | localhost |                                           |</span><br><span class="line">| mysql.session    | localhost | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE |</span><br><span class="line">| mysql.sys        | localhost | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE |</span><br><span class="line">| debian-sys-maint | localhost | *F88FAB99DA931815794B206EF76153157BB46708 |</span><br><span class="line">| tony             | %         | *71C4791904DFA9FBABAE8F06D9CD9EF4F84544E4 |</span><br><span class="line">+------------------+-----------+-------------------------------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><p>给予新用户权限(具体权限可以根据自己的需求更改)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#x27;tony&#x27;@&#x27;%&#x27;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><p>配置防火墙，允许3306端口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow 3306/tcp</span><br></pre></td></tr></table></figure><p>修改<code>/etc/mysql/my.cnf</code>或<code>/etc/mysql/mysql.conf.d/mysqld.cnf</code>文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">bind-address = 0.0.0.0</span><br></pre></td></tr></table></figure><p>重启mysql</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart mysql</span><br></pre></td></tr></table></figure><p>下载社区版的<a href="https://github.com/beekeeper-studio/beekeeper-studio/releases">beekeeper</a></p><p>安装完成后打开，点击new connection</p><p><img src="https://s2.loli.net/2024/04/01/jTJO8cdCuRv3PB2.png" class="lazyload placeholder" data-srcset="https://s2.loli.net/2024/04/01/jTJO8cdCuRv3PB2.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><p>connection type选择mysql</p><p>接下来依次填写你服务器的ip（域名），要连接的端口（mysql默认3306），用户名及用户密码（刚刚创建的）</p><p><img src="https://s2.loli.net/2024/04/01/8lvArm9iFsS4H3q.png" class="lazyload placeholder" data-srcset="https://s2.loli.net/2024/04/01/8lvArm9iFsS4H3q.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><p>点击connect连接成功</p><p><img src="https://s2.loli.net/2024/04/01/K6EXShsaJ7WilUp.png" class="lazyload placeholder" data-srcset="https://s2.loli.net/2024/04/01/K6EXShsaJ7WilUp.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p>]]></content>
      
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用python脚本自动操作微信小程序</title>
      <link href="/2024/03/18/%E4%BD%BF%E7%94%A8python%E8%84%9A%E6%9C%AC%E8%87%AA%E5%8A%A8%E6%93%8D%E4%BD%9C%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
      <url>/2024/03/18/%E4%BD%BF%E7%94%A8python%E8%84%9A%E6%9C%AC%E8%87%AA%E5%8A%A8%E6%93%8D%E4%BD%9C%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="使用python脚本自动操作小程序"><a href="#使用python脚本自动操作小程序" class="headerlink" title="使用python脚本自动操作小程序"></a>使用python脚本自动操作小程序</h1><h2 id="引子"><a href="#引子" class="headerlink" title="引子"></a>引子</h2><p>今天群里有人分享了一个微信小游戏———“开局托儿所”，制作方是和“羊了个羊”同一个公司，可想而知这个游戏的尿性。第一关极其简单，第二关难度飙升，玩到后面无解也是常态。我玩了一局，果不其然，只有托儿所的水平。这怎么能忍呢？python，启动！</p><h2 id="游戏规则"><a href="#游戏规则" class="headerlink" title="游戏规则"></a>游戏规则</h2><p>在开始写代码之前，我先介绍一下这个游戏的规则。</p><p>游戏会先给出一个随机的数字方阵，玩家可以在屏幕上绘制矩形，被矩形覆盖到的数字相加若等于10则会被消除，消除的数字越多，分数越多。当然，你也可以自己搜索小程序玩上一局。<br><img src="https://s2.loli.net/2024/03/18/fKegp7mCJMFWYEU.png" class="lazyload placeholder" data-srcset="https://s2.loli.net/2024/03/18/fKegp7mCJMFWYEU.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="开局托儿所游戏图片"></p><h2 id="需要用到的库"><a href="#需要用到的库" class="headerlink" title="需要用到的库"></a>需要用到的库</h2><ol><li><p><code>pyautogui</code>：用于在屏幕上自动执行鼠标和键盘操作。它可以帮助你编写自动化脚本，模拟用户在计算机上的交互行为，例如点击、拖动、输入文本等。</p></li><li><p><code>pygetwindow</code>：用于获取和管理窗口相关信息，例如窗口标题、位置、大小等。它提供了一些方便的方法来操作桌面上的窗口，使得对窗口的管理更加简单和灵活。</p></li><li><p><code>time</code>：Python 标准库中的一个模块，用于处理与时间相关的操作。</p></li><li><p><code>copy</code>：Python 标准库中的一个模块，用于实现对象的浅拷贝（shallow copy）和深拷贝（deep copy）。</p></li><li><p><code>numpy</code>： Python 中用于科学计算的重要库之一。它提供了高性能的多维数组对象（称为 ndarray），以及对这些数组进行操作的各种函数。</p></li><li><p><code>os</code>： Python 标准库中的一个模块，用于与操作系统进行交互，提供了许多对文件和目录进行操作的功能。</p></li><li><p><code>cv2</code>：OpenCV（Open Source Computer Vision Library，开源计算机视觉库）的 Python 接口库，用于图像处理、计算机视觉和图像识别等任务。</p></li><li><p><code>pytesseract</code>：用于将图像中的文本转换为可识别的文本字符串。它是对 Google 的 Tesseract OCR（Optical Character Recognition，光学字符识别）引擎的封装，通过调用 Tesseract 引擎实现文本识别功能。</p></li></ol><p>本脚本中pygetwindow别名gw，numpy别名np</p><h2 id="main-py"><a href="#main-py" class="headerlink" title="main.py"></a>main.py</h2><p>首先创建一个eliminater类以及其构造函数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">def __init__(self, window_title=&quot;开局托儿所&quot;):</span><br><span class="line">    self.window = gw.getWindowsWithTitle(window_title)[0]</span><br><span class="line">    self.width = self.window.width</span><br><span class="line">    self.height = self.window.height</span><br><span class="line">    self.s1list = []</span><br><span class="line">    self.runtime = 0</span><br><span class="line">    self.thread = 3</span><br><span class="line">    self.thd = 80</span><br></pre></td></tr></table></figure><p>action方法用于模拟鼠标绘制矩形</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def action(self, begin_x, end_x, begin_y, end_y,duration=0.1):</span><br><span class="line">    x1, y1, x2, y2 = self.digit_squares[begin_x * 10 + begin_y]</span><br><span class="line">    x1, y1 = ((x1 + x2) / 2, (y1 + y2) / 2)</span><br><span class="line">    x3, y3, x4, y4 = self.digit_squares[(end_x - 1) * 10 + end_y - 1]</span><br><span class="line">    x2, y2 = ((x3 + x4) / 2, (y3 + y4) / 2)</span><br><span class="line">    pyautogui.moveTo(self.window.left + x1, self.window.top+self.height//7 + y1)</span><br><span class="line">    pyautogui.mouseDown()</span><br><span class="line">    pyautogui.moveTo(self.window.left + x2, self.window.top+self.height//7 + y2, duration=duration)</span><br><span class="line">    pyautogui.mouseUp()</span><br></pre></td></tr></table></figure><p>restart方法用于重开一局</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">def restart(self):</span><br><span class="line">    # 设置</span><br><span class="line">    x = self.window.left + 40</span><br><span class="line">    y = self.window.top + 70</span><br><span class="line">    pyautogui.click(x, y)</span><br><span class="line">    time.sleep(1)</span><br><span class="line">    # 放弃</span><br><span class="line">    x = self.window.left+ (self.width // 2)</span><br><span class="line">    y = self.window.top + 500</span><br><span class="line">    pyautogui.click(x, y)</span><br><span class="line">    time.sleep(1)</span><br><span class="line">    # 确定</span><br><span class="line">    y = self.window.top + 520</span><br><span class="line">    pyautogui.click(x, y)</span><br><span class="line">    time.sleep(1)</span><br><span class="line">    # 开始游戏</span><br><span class="line">    y = self.window.top + 780</span><br><span class="line">    pyautogui.click(x, y)</span><br><span class="line">    time.sleep(2)</span><br></pre></td></tr></table></figure><p>获取score</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def score(self):</span><br><span class="line">    if hasattr(self, &#x27;cal_matrix&#x27;):</span><br><span class="line">        return 160 - np.sum(self.cal_matrix.astype(bool))</span><br><span class="line">    else:</span><br><span class="line">        print(&#x27;未初始化&#x27;)</span><br><span class="line">        return 0</span><br></pre></td></tr></table></figure><p>record方法记录历史分数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def record(self, x):</span><br><span class="line">    with open(&#x27;历史分数.txt&#x27;, &#x27;a&#x27;) as file:</span><br><span class="line">        if x[1]==0:</span><br><span class="line">            file.write(f&#x27;\n&#x27;)</span><br><span class="line">        else:</span><br><span class="line">            file.write(f&#x27;\t策略&#123;x[0]&#125;&#123;x[1]&#125;: &#123;self.score&#125;,&#x27;)</span><br></pre></td></tr></table></figure><p>截图并识别</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">def init_game(self):</span><br><span class="line">    time.sleep(1)</span><br><span class="line">    print(&#x27;\t截图中……&#x27;)</span><br><span class="line">    self.capture_window()</span><br><span class="line">    if self.frame is not None:</span><br><span class="line">        print(&#x27;\t识别图像中，请耐心等待……&#x27;)</span><br><span class="line">        matrix, self.digit_squares = recognize_matrix(self.frame, self.thread)</span><br><span class="line">        try:</span><br><span class="line">            self.matrix = np.array(matrix).astype(int) </span><br><span class="line">            assert self.matrix.shape == (16,10)</span><br><span class="line">            return True</span><br><span class="line">        except Exception as e:</span><br><span class="line">            print(&#x27;\t识别错误，尝试重启&#x27;)</span><br><span class="line">            self.trys += 1</span><br><span class="line">            return False</span><br><span class="line">        time.sleep(3)</span><br><span class="line">    else:</span><br><span class="line">        print(&quot;截图失败！&quot;)</span><br><span class="line">        return False</span><br></pre></td></tr></table></figure><p>执行策略</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">def run_strategy(self, strategy, action=False):</span><br><span class="line">    self.cal_matrix = self.matrix.copy()</span><br><span class="line">    if strategy[0] == 1:</span><br><span class="line">        self.cal_two_x(action=action)</span><br><span class="line">    elif strategy[0] == 2:</span><br><span class="line">        self.cal_two_y(action=action)</span><br><span class="line">    if strategy[1] == 1:</span><br><span class="line">        self.cal_all_x(action=action)</span><br><span class="line">    elif strategy[1] == 2:</span><br><span class="line">        self.cal_all_y(action=action)</span><br></pre></td></tr></table></figure><p>捕捉窗口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">def capture_window(self, record=False):</span><br><span class="line">    try:</span><br><span class="line">        try:</span><br><span class="line">            self.window.activate()</span><br><span class="line">        except:</span><br><span class="line">            pass</span><br><span class="line">        time.sleep(1)</span><br><span class="line">        screenshot = pyautogui.screenshot(region=(self.window.left, self.window.top,</span><br><span class="line">                                                    self.window.width, self.window.height))</span><br><span class="line">        frame = cv2.cvtColor(np.array(screenshot), cv2.COLOR_RGB2BGR)</span><br><span class="line">        if record:</span><br><span class="line">            cv2.imwrite(f&#x27;result_&#123;int(time.time())&#125;.png&#x27;, frame)</span><br><span class="line">        else:</span><br><span class="line">            self.frame = frame[self.height//7:-self.height//25,:,:]</span><br><span class="line">            cv2.imwrite(&#x27;shot.png&#x27;, self.frame)</span><br><span class="line">    except IndexError:</span><br><span class="line">        print(&quot;窗口未找到&quot;)</span><br><span class="line">        return None</span><br></pre></td></tr></table></figure><p>各种策略</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line">def cal_all_x(self, End=False, action=False):</span><br><span class="line">    if End:</span><br><span class="line">        return</span><br><span class="line">    else:</span><br><span class="line">        End=True</span><br><span class="line">        for x_len in range(1, 16):</span><br><span class="line">            for y_len in range(1, 10):</span><br><span class="line">                for begin_x in range(0, 16-x_len+1):</span><br><span class="line">                    for begin_y in range(0, 10-y_len+1):</span><br><span class="line">                        _sum = np.sum(self.cal_matrix[begin_x:begin_x+x_len,begin_y: begin_y + y_len])</span><br><span class="line">                        if _sum == 10:</span><br><span class="line">                            self.cal_matrix[begin_x:begin_x+x_len,begin_y: begin_y + y_len] = 0</span><br><span class="line">                            if action:</span><br><span class="line">                                self.action(begin_x, begin_x+x_len, begin_y, begin_y + y_len)</span><br><span class="line">                            End = False</span><br><span class="line">        self.cal_all_x(End=End, action=action)</span><br><span class="line">        </span><br><span class="line">def cal_all_y(self, End=False, action=False):</span><br><span class="line">    if End:</span><br><span class="line">        return</span><br><span class="line">    else:</span><br><span class="line">        End=True</span><br><span class="line">        for y_len in range(1, 10):</span><br><span class="line">            for x_len in range(1, 16):</span><br><span class="line">                for begin_x in range(0, 16-x_len+1):</span><br><span class="line">                    for begin_y in range(0, 10-y_len+1):</span><br><span class="line">                        _sum = np.sum(self.cal_matrix[begin_x:begin_x+x_len,begin_y: begin_y + y_len])</span><br><span class="line">                        if _sum == 10:</span><br><span class="line">                            self.cal_matrix[begin_x:begin_x+x_len,begin_y: begin_y + y_len] = 0</span><br><span class="line">                            if action:</span><br><span class="line">                                self.action(begin_x, begin_x+x_len, begin_y, begin_y + y_len)</span><br><span class="line">                            End = False</span><br><span class="line">        self.cal_all_y(End=End, action=action)</span><br><span class="line"></span><br><span class="line">def cal_two_x(self, End=False, action=False):</span><br><span class="line">    if End:</span><br><span class="line">        return</span><br><span class="line">    else:</span><br><span class="line">        End=True</span><br><span class="line">        for begin_x in range(0, 16):</span><br><span class="line">            for begin_y in range(0, 10):</span><br><span class="line">                # 搜索右边</span><br><span class="line">                if self.cal_matrix[begin_x, begin_y] ==0:</span><br><span class="line">                    continue</span><br><span class="line">                if len(self.s1list) &gt;0 and self.cal_matrix[begin_x, begin_y] not in self.s1list:</span><br><span class="line">                    continue</span><br><span class="line">                for x in range(begin_x+1, 16):</span><br><span class="line">                    if self.cal_matrix[x, begin_y] ==0:</span><br><span class="line">                        continue</span><br><span class="line">                    elif self.cal_matrix[begin_x, begin_y]+self.cal_matrix[x, begin_y] ==10:</span><br><span class="line">                        self.cal_matrix[x, begin_y] = 0</span><br><span class="line">                        self.cal_matrix[begin_x, begin_y] = 0</span><br><span class="line">                        if action:</span><br><span class="line">                            self.action(begin_x, x+1, begin_y, begin_y+1)</span><br><span class="line">                        End = False</span><br><span class="line">                        break</span><br><span class="line">                    else:</span><br><span class="line">                        break</span><br><span class="line">                # 搜索左边</span><br><span class="line">                for x in range(begin_x-1, -1, -1):</span><br><span class="line">                    if x &lt; 0:</span><br><span class="line">                        break</span><br><span class="line">                    if self.cal_matrix[x, begin_y] ==0:</span><br><span class="line">                        continue</span><br><span class="line">                    elif self.cal_matrix[begin_x, begin_y]+self.cal_matrix[x, begin_y] ==10:</span><br><span class="line">                        self.cal_matrix[x, begin_y] = 0</span><br><span class="line">                        self.cal_matrix[begin_x, begin_y] = 0</span><br><span class="line">                        if action:</span><br><span class="line">                            self.action(x, begin_x+1, begin_y, begin_y+1)</span><br><span class="line">                        End = False</span><br><span class="line">                        break</span><br><span class="line">                    else:</span><br><span class="line">                        break</span><br><span class="line">                # 搜索下面</span><br><span class="line">                for y in range(begin_y+1, 10):</span><br><span class="line">                    if self.cal_matrix[begin_x, y] ==0:</span><br><span class="line">                        continue</span><br><span class="line">                    elif self.cal_matrix[begin_x, begin_y]+self.cal_matrix[begin_x, y] ==10:</span><br><span class="line">                        self.cal_matrix[begin_x, begin_y] = 0</span><br><span class="line">                        self.cal_matrix[begin_x, y] = 0</span><br><span class="line">                        if action:</span><br><span class="line">                            self.action(begin_x, begin_x+1, begin_y, y+1)</span><br><span class="line">                        End = False</span><br><span class="line">                        break</span><br><span class="line">                    else:</span><br><span class="line">                        break</span><br><span class="line">                # 搜索上面</span><br><span class="line">                for y in range(begin_y-1, -1, -1):</span><br><span class="line">                    if y &lt; 0:</span><br><span class="line">                        break</span><br><span class="line">                    if self.cal_matrix[begin_x, y] ==0:</span><br><span class="line">                        continue</span><br><span class="line">                    elif self.cal_matrix[begin_x, begin_y]+self.cal_matrix[begin_x, y] ==10:</span><br><span class="line">                        self.cal_matrix[begin_x, begin_y] = 0</span><br><span class="line">                        self.cal_matrix[begin_x, y] = 0</span><br><span class="line">                        if action:</span><br><span class="line">                            self.action(begin_x, begin_x+1, y, begin_y+1)</span><br><span class="line">                        End = False</span><br><span class="line">                        break</span><br><span class="line">                    else:</span><br><span class="line">                        break</span><br><span class="line">        self.cal_two_x(End=End, action=action)</span><br><span class="line">        </span><br><span class="line">def cal_two_y(self, End=False, action=False):</span><br><span class="line">    if End:</span><br><span class="line">        return</span><br><span class="line">    else:</span><br><span class="line">        End=True</span><br><span class="line">        for begin_y in range(0, 10):</span><br><span class="line">            for begin_x in range(0, 16):</span><br><span class="line">                # 搜索右边</span><br><span class="line">                if self.cal_matrix[begin_x, begin_y] ==0:</span><br><span class="line">                    continue</span><br><span class="line">                if len(self.s1list) &gt;0 and self.cal_matrix[begin_x, begin_y] not in self.s1list:</span><br><span class="line">                    continue</span><br><span class="line">                for x in range(begin_x+1, 16):</span><br><span class="line">                    if self.cal_matrix[x, begin_y] ==0:</span><br><span class="line">                        continue</span><br><span class="line">                    elif self.cal_matrix[begin_x, begin_y]+self.cal_matrix[x, begin_y] ==10:</span><br><span class="line">                        self.cal_matrix[x, begin_y] = 0</span><br><span class="line">                        self.cal_matrix[begin_x, begin_y] = 0</span><br><span class="line">                        if action:</span><br><span class="line">                            self.action(begin_x, x+1, begin_y, begin_y+1)</span><br><span class="line">                        End = False</span><br><span class="line">                        break</span><br><span class="line">                    else:</span><br><span class="line">                        break</span><br><span class="line">                # 搜索左边</span><br><span class="line">                for x in range(begin_x-1, -1, -1):</span><br><span class="line">                    if x &lt; 0:</span><br><span class="line">                        break</span><br><span class="line">                    if self.cal_matrix[x, begin_y] ==0:</span><br><span class="line">                        continue</span><br><span class="line">                    elif self.cal_matrix[begin_x, begin_y]+self.cal_matrix[x, begin_y] ==10:</span><br><span class="line">                        self.cal_matrix[x, begin_y] = 0</span><br><span class="line">                        self.cal_matrix[begin_x, begin_y] = 0</span><br><span class="line">                        if action:</span><br><span class="line">                            self.action(x, begin_x+1, begin_y, begin_y+1)</span><br><span class="line">                        End = False</span><br><span class="line">                        break</span><br><span class="line">                    else:</span><br><span class="line">                        break</span><br><span class="line">                # 搜索下面</span><br><span class="line">                for y in range(begin_y+1, 10):</span><br><span class="line">                    if self.cal_matrix[begin_x, y] ==0:</span><br><span class="line">                        continue</span><br><span class="line">                    elif self.cal_matrix[begin_x, begin_y]+self.cal_matrix[begin_x, y] ==10:</span><br><span class="line">                        self.cal_matrix[begin_x, begin_y] = 0</span><br><span class="line">                        self.cal_matrix[begin_x, y] = 0</span><br><span class="line">                        if action:</span><br><span class="line">                            self.action(begin_x, begin_x+1, begin_y, y+1)</span><br><span class="line">                        End = False</span><br><span class="line">                        break</span><br><span class="line">                    else:</span><br><span class="line">                        break</span><br><span class="line">                # 搜索上面</span><br><span class="line">                for y in range(begin_y-1, -1, -1):</span><br><span class="line">                    if y &lt; 0:</span><br><span class="line">                        break</span><br><span class="line">                    if self.cal_matrix[begin_x, y] ==0:</span><br><span class="line">                        continue</span><br><span class="line">                    elif self.cal_matrix[begin_x, begin_y]+self.cal_matrix[begin_x, y] ==10:</span><br><span class="line">                        self.cal_matrix[begin_x, begin_y] = 0</span><br><span class="line">                        self.cal_matrix[begin_x, y] = 0</span><br><span class="line">                        if action:</span><br><span class="line">                            self.action(begin_x, begin_x+1, y, begin_y+1)</span><br><span class="line">                        End = False</span><br><span class="line">                        break</span><br><span class="line">                    else:</span><br><span class="line">                        break</span><br><span class="line">        self.cal_two_y(End=End, action=action)</span><br></pre></td></tr></table></figure><p>运行脚本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">def run(self, continues=True):</span><br><span class="line">    self.thread = int(input(&#x27;OCR线程数（推荐3）：&#x27;))</span><br><span class="line">    self.thd = int(input(&#x27;请输入分数阈值（低于该值将自动放弃重开）：&#x27;))</span><br><span class="line">    print(f&quot;开始运行...&quot;)</span><br><span class="line">    self.trys = 0</span><br><span class="line">    while continues:</span><br><span class="line">        if self.trys &gt; 5:</span><br><span class="line">            print(&#x27;错误次数过多，终止运行&#x27;)</span><br><span class="line">            break</span><br><span class="line">        if not self.init_game():</span><br><span class="line">            self.restart()</span><br><span class="line">            continue</span><br><span class="line">        self.runtime += 1</span><br><span class="line">        print(&#x27;\t识别完毕，执行策略……&#x27;)</span><br><span class="line">        maxscore = 0</span><br><span class="line">        go = None</span><br><span class="line">        for strategy in [[0,1], [0,2], [1,1], [1,2], [2,1], [2,2]]:</span><br><span class="line">            self.run_strategy(strategy)</span><br><span class="line">            self.record(strategy)</span><br><span class="line">            if self.score &gt; maxscore:</span><br><span class="line">                maxscore = self.score</span><br><span class="line">                go = strategy</span><br><span class="line">            print(f&#x27;\t策略&#123;strategy&#125;分数:&#123;self.score&#125;&#x27;)</span><br><span class="line"></span><br><span class="line">        self.record([0,0])</span><br><span class="line">        self.trys = 0</span><br><span class="line">        if maxscore &lt; self.thd:</span><br><span class="line">            print(f&#x27;\t均小于目标&#123;self.thd&#125;，放弃本次&#x27;)</span><br><span class="line">            self.restart()</span><br><span class="line">        else:</span><br><span class="line">            print(&#x27;\t执行最优策略&#x27;, go)</span><br><span class="line">            self.run_strategy(go, action=True)</span><br><span class="line">            self.capture_window(record=True)</span><br><span class="line">            time.sleep(100)</span><br><span class="line">        print(f&quot;游戏&#123;self.runtime&#125;结束, 开始下一次...&quot;)</span><br><span class="line">        # 点击再次挑战</span><br><span class="line">        x = self.window.left + (self.width // 2)</span><br><span class="line">        y = self.window.top + 620</span><br><span class="line">        pyautogui.click(x, y)</span><br><span class="line">        time.sleep(1)</span><br></pre></td></tr></table></figure><h2 id="recognizeNum-py"><a href="#recognizeNum-py" class="headerlink" title="recognizeNum.py"></a>recognizeNum.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line">import pytesseract</span><br><span class="line">import os</span><br><span class="line">import cv2</span><br><span class="line">import numpy as np</span><br><span class="line">from functools import partial</span><br><span class="line">from multiprocessing import Pool</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">os.environ[&#x27;TESSDATA_PREFIX&#x27;] = r&#x27;&#x27;  # 替换为您的实际路径</span><br><span class="line">pytesseract.pytesseract.tesseract_cmd = r&#x27;&#x27;  # 替换为您的实际路径</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def get_score(img):</span><br><span class="line">    res = pytesseract.image_to_string(nmg, lang=&#x27;eng&#x27;, config=&#x27;--psm 6 --oem 3 -c tessedit_char_whitelist=0123456789&#x27;)</span><br><span class="line">    return int(res.strip())</span><br><span class="line"></span><br><span class="line">def get_intersection(h_line, v_line):</span><br><span class="line">    rho_h, theta_h = h_line</span><br><span class="line">    rho_v, theta_v = v_line</span><br><span class="line">    # 计算交点坐标</span><br><span class="line">    x, y = np.linalg.solve(np.array([[np.cos(theta_h), np.sin(theta_h)],</span><br><span class="line">                                     [np.cos(theta_v), np.sin(theta_v)]]).astype(float),</span><br><span class="line">                           np.array([rho_h, rho_v]).astype(float))</span><br><span class="line"></span><br><span class="line">    # 将交点坐标转为整数</span><br><span class="line">    x, y = int(x), int(y)</span><br><span class="line"></span><br><span class="line">    return x, y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def find_all_squares(image):</span><br><span class="line">    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)</span><br><span class="line">    blurred = cv2.GaussianBlur(gray, (9, 9), 0)</span><br><span class="line">    sharpened = cv2.filter2D(blurred, -1, np.array([[0, -2, 0], [-2, 9, -2], [0, -2, 0]]))  # 强化锐化处理</span><br><span class="line">    edges = cv2.Canny(sharpened, 200, 500)</span><br><span class="line"></span><br><span class="line">    # 使用霍夫线变换检测直线</span><br><span class="line">    lines = cv2.HoughLines(edges, 1, np.pi / 180, threshold=175)</span><br><span class="line"></span><br><span class="line">    horizontal_lines = []</span><br><span class="line">    vertical_lines = []</span><br><span class="line"></span><br><span class="line">    if lines is not None:</span><br><span class="line">        for line in lines:</span><br><span class="line">            rho, theta = line[0]</span><br><span class="line">            a = np.cos(theta)</span><br><span class="line">            b = np.sin(theta)</span><br><span class="line">            x0 = a * rho</span><br><span class="line">            y0 = b * rho</span><br><span class="line"></span><br><span class="line">            # 转换为图像上的坐标</span><br><span class="line">            x1 = int(x0 + 1000 * (-b))</span><br><span class="line">            y1 = int(y0 + 1000 * (a))</span><br><span class="line">            x2 = int(x0 - 1000 * (-b))</span><br><span class="line">            y2 = int(y0 - 1000 * (a))</span><br><span class="line"></span><br><span class="line">            # 计算直线的角度</span><br><span class="line">            angle = np.degrees(np.arctan2(y2 - y1, x2 - x1))</span><br><span class="line"></span><br><span class="line">            # 根据角度进行分类，阈值可以根据实际情况调整</span><br><span class="line">            if 0 &lt;= abs(angle) &lt;= 2 or 178 &lt;= abs(angle) &lt;= 175:</span><br><span class="line">                horizontal_lines.append((rho, theta))</span><br><span class="line">            elif 88 &lt;= abs(angle) &lt;= 92:</span><br><span class="line">                vertical_lines.append((rho, theta))</span><br><span class="line"></span><br><span class="line">    # 对横线按照从上到下的顺序排序</span><br><span class="line">    horizontal_lines.sort(key=lambda line: line[0])</span><br><span class="line">    merged_horizontal_lines = []</span><br><span class="line">    merged_vertical_lines = []</span><br><span class="line">    merge_threshold = 3</span><br><span class="line">    previous_line = None</span><br><span class="line"></span><br><span class="line">    for current_line in horizontal_lines:</span><br><span class="line">        if previous_line is None or current_line[0] - previous_line[0] &gt; merge_threshold:</span><br><span class="line">            merged_horizontal_lines.append((current_line[0], current_line[1]))</span><br><span class="line">        previous_line = current_line</span><br><span class="line"></span><br><span class="line">    # 对竖线按照从左到右的顺序排序</span><br><span class="line">    vertical_lines.sort(key=lambda line: line[0])</span><br><span class="line">    previous_line = None</span><br><span class="line">    for current_line in vertical_lines:</span><br><span class="line">        if previous_line is not None and current_line[0] - previous_line[0] &lt;= merge_threshold:</span><br><span class="line">            # 合并相邻的水平线</span><br><span class="line">            merged_vertical_lines[-1] = (current_line[0], current_line[1])</span><br><span class="line">        else:</span><br><span class="line">            merged_vertical_lines.append((current_line[0], current_line[1]))</span><br><span class="line">        previous_line = current_line</span><br><span class="line"></span><br><span class="line">    found_squares = []</span><br><span class="line">    threshold = 3</span><br><span class="line"></span><br><span class="line">    # 寻找正方形</span><br><span class="line">    for i, h_line in enumerate(merged_horizontal_lines):</span><br><span class="line">        if i &gt;= len(merged_horizontal_lines)-1:</span><br><span class="line">            break</span><br><span class="line">        next_h_line = merged_horizontal_lines[i+1]</span><br><span class="line">        for j, v_line in enumerate(merged_vertical_lines):</span><br><span class="line">            if j &gt;= len(merged_vertical_lines) - 1:</span><br><span class="line">                break</span><br><span class="line">            next_v_line = merged_vertical_lines[j+1]</span><br><span class="line"></span><br><span class="line">            p_x1, p_y1 = get_intersection(h_line, v_line)</span><br><span class="line">            p_x2, p_y2 = get_intersection(next_h_line, next_v_line)</span><br><span class="line"></span><br><span class="line">            is_square = abs(abs(p_x2-p_x1) - abs(p_y2-p_y1)) &lt;= threshold and abs(p_x2-p_x1) &gt; 15</span><br><span class="line">            if is_square:</span><br><span class="line">                found_squares.append((p_x1, p_y1, p_x2, p_y2))</span><br><span class="line"></span><br><span class="line">    return found_squares</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def crop_region(image, square):</span><br><span class="line">    (x1, y1, x2, y2) = square</span><br><span class="line"></span><br><span class="line">    # 通过切片提取矩形区域</span><br><span class="line">    cropped_region = image[y1:y2, x1:x2]</span><br><span class="line"></span><br><span class="line">    return cropped_region</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def recognize_digit(image):</span><br><span class="line">    # 预处理图像，例如二值化处理</span><br><span class="line">    gray_image = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)</span><br><span class="line">    _, thresholded = cv2.threshold(gray_image, 127, 255, cv2.THRESH_BINARY)</span><br><span class="line"></span><br><span class="line">    # 使用 pytesseract 进行数字识别</span><br><span class="line">    digit = pytesseract.image_to_string(thresholded, lang=&#x27;eng&#x27;, config=&#x27;--psm 6 digits -c tessedit_char_whitelist=123456789&#x27;)  # --psm 6 表示按行识别</span><br><span class="line"></span><br><span class="line">    return digit.strip()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def recognize_matrix(image, thread):</span><br><span class="line">    squares = find_all_squares(image)</span><br><span class="line">    get_crop = partial(crop_region, image)</span><br><span class="line">    crop_images = list(map(get_crop, squares))</span><br><span class="line">    worker = Pool(thread)</span><br><span class="line">    recognized_digits = worker.map(recognize_digit, crop_images)</span><br><span class="line">    worker.close()</span><br><span class="line">    worker.join()</span><br><span class="line"></span><br><span class="line">    digits_matrix = []</span><br><span class="line">    for i in range(16):</span><br><span class="line">        digits_matrix.append((recognized_digits[i * 10:i * 10 + 10]))</span><br><span class="line"></span><br><span class="line">    return digits_matrix, squares</span><br></pre></td></tr></table></figure><h2 id="结尾的话"><a href="#结尾的话" class="headerlink" title="结尾的话"></a>结尾的话</h2><p>我最终用这个脚本打了135分，成功上榜。快在评论区晒晒你的分数吧~</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 脚本 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>利用mklink指令清理c盘</title>
      <link href="/2024/03/05/%E5%88%A9%E7%94%A8mklink%E6%8C%87%E4%BB%A4%E6%B8%85%E7%90%86c%E7%9B%98/"/>
      <url>/2024/03/05/%E5%88%A9%E7%94%A8mklink%E6%8C%87%E4%BB%A4%E6%B8%85%E7%90%86c%E7%9B%98/</url>
      
        <content type="html"><![CDATA[<h1 id="利用mklink指令清理c盘"><a href="#利用mklink指令清理c盘" class="headerlink" title="利用mklink指令清理c盘"></a>利用mklink指令清理c盘</h1><p>今天发现c盘满了，想清理一下，但是面对c盘中的文件又不敢轻举妄动。在不清楚文件作用的情况下，直接删除文件还是有风险的。那么有没有什么方法可以保留文件但是同时又把c盘中的空间清理出来呢？带着这个问题，我打开搜索引擎，果然发现了符合我需求的办法。</p><h2 id="mklink"><a href="#mklink" class="headerlink" title="mklink"></a>mklink</h2><p>没错，解决方案就是windows系统自带的指令——mklink，当我们在cmd输入<code>mklink /?</code>时，控制台会返回以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MKLINK [[/D] | [/H] | [/J]] Link Target</span><br><span class="line"></span><br><span class="line">        /D      创建目录符号链接。默认为文件</span><br><span class="line">                符号链接。</span><br><span class="line">        /H      创建硬链接而非符号链接。</span><br><span class="line">        /J      创建目录联接。</span><br><span class="line">        Link    指定新的符号链接名称。</span><br><span class="line">        Target  指定新链接引用的路径</span><br><span class="line">                (相对或绝对)。</span><br></pre></td></tr></table></figure><h2 id="windows链接类型"><a href="#windows链接类型" class="headerlink" title="windows链接类型"></a>windows链接类型</h2><p>为了看懂控制台给出的用法，我查询了windows的各个链接类型以及他们的区别</p><ol><li><p>快捷方式（Shortcut）：这个是最常见的链接类型了，我就不过多介绍</p></li><li><p>符号链接（Symbolic Link）：符号链接的路径可以是相对路径或绝对路径，可以是目录或文件，不占空间，可以跨本地磁盘，也可以跨网络磁盘（共享目录）。源目录移动、重命名或删除后，链接目录无效；链接目录删除，源目录不受影响；源目录里面的文件发生变化时（新增、修改、删除），链接目录里面的文件同步发生变化，反之，同样成立。</p></li><li><p>联接（Junction）：联接的路径只能是绝对路径，只能是目录，不占空间，只能跨本地磁盘。其他与符号链接差别不大。</p></li><li><p>硬链接（Hard Link）：硬链接的路径只能是绝对路径，占用空间和源文件一样且只能是文件。源文件删除后，链接文件无效；链接文件删除，源文件不受影响；只有将源文件和链接文件全部删除时，才会将文件真正的删除；当源文件内容发生变化时（修改），链接文件同步发生修改，反之，同样成立。</p></li></ol><h2 id="文件符号链接操作"><a href="#文件符号链接操作" class="headerlink" title="文件符号链接操作"></a>文件符号链接操作</h2><p>作为测试，我首先在E盘和F盘各创建一个test文件夹。并创建了<code>E:\test\text1.txt</code>和<code>F:\test\text2.txt</code>两个文件。然后运行指令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mklink E:\test\text1.txt F:\test\text2.txt</span><br></pre></td></tr></table></figure><p>但是控制台给我一个报错</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">当文件已存在时，无法创建该文件。</span><br></pre></td></tr></table></figure><p>于是我删除了<code>E:\test\text1.txt</code>，然后再次运行指令，控制台返回了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">为 E:\test\text1.txt &lt;&lt;===&gt;&gt; F:\test\text2.txt 创建的符号链接</span><br></pre></td></tr></table></figure><p>此时<code>E:\test</code>下多出了一个叫<code>test1.txt</code>的文件，并且有一个类似超链接的标志，我在任意一个txt文件中修改内容，另一个则会同步改变。</p><h2 id="目录符号链接操作"><a href="#目录符号链接操作" class="headerlink" title="目录符号链接操作"></a>目录符号链接操作</h2><p>与文件符号链接一样，我们现在<code>F:\test</code>下创建了一个<code>target</code>的文件夹，然后运行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mklink /d E:\test\link F:\test\target</span><br><span class="line">为 E:\test\link &lt;&lt;===&gt;&gt; F:\test\target 创建的符号链接</span><br></pre></td></tr></table></figure><p>现在<code>E:\test</code>又出现一个<code>link</code>文件夹，这个文件夹与target也是同步变化的，最重要的是，这个link文件夹是不占空间的，也就是说，我们可以利用这种方法将c盘的一些文件夹作为link符号链接到target上，以达到清理c盘空间的目的。</p><h2 id="目录联接操作"><a href="#目录联接操作" class="headerlink" title="目录联接操作"></a>目录联接操作</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mklink /j E:\test\link F:\test\target</span><br><span class="line">为 E:\test\link &lt;&lt;===&gt;&gt; F:\test\target 创建的联接</span><br></pre></td></tr></table></figure><p>在这个例子中与目录符号链接的效果差别不大</p><h2 id="硬链接操作"><a href="#硬链接操作" class="headerlink" title="硬链接操作"></a>硬链接操作</h2><p>我们将<code>E:\test\</code>清空并创建<code>F:\test\text2.txt</code>，执行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mklink /h E:\test\text1.txt F:\test\text2.txt</span><br></pre></td></tr></table></figure><p>系统报错</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">系统无法将文件移到不同的磁盘驱动器。</span><br></pre></td></tr></table></figure><p>差点忘了硬链接不能跨本地磁盘</p><p>重新执行命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mklink /h F:\test\text3.txt F:\test\text2.txt</span><br></pre></td></tr></table></figure><p>运行成功</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">为 F:\test\text3.txt &lt;&lt;===&gt;&gt; F:\test\text2.txt 创建了硬链接</span><br></pre></td></tr></table></figure><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>今天通过清理c盘的契机了解到mklink指令，并深入了解（虽然也不是很深入）了windows系统上不同的链接类型。如果大家有什么想补充或者纠错的，请在评论区留言~</p>]]></content>
      
      
      <categories>
          
          <category> CMD </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cmd </tag>
            
            <tag> windows </tag>
            
            <tag> mklink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CREATE行为漏斗模型</title>
      <link href="/2024/03/04/CREATE%E8%A1%8C%E4%B8%BA%E6%BC%8F%E6%96%97%E6%A8%A1%E5%9E%8B/"/>
      <url>/2024/03/04/CREATE%E8%A1%8C%E4%B8%BA%E6%BC%8F%E6%96%97%E6%A8%A1%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="CREATE行为漏斗模型"><a href="#CREATE行为漏斗模型" class="headerlink" title="CREATE行为漏斗模型"></a>CREATE行为漏斗模型</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>当我们构建UI和UX时，我们常常会分析用户的行为，但总是无从下手。CREATE漏斗模型（由Stephen Wendell设计）给我们提供了一个思路。CREATE分别是Cue（线索）、Reaction（反应）、Evaluation（评估）、Ability（能力）、Timing（时机）、Execute（行动）</p><p><img src="https://s2.loli.net/2024/03/04/UKq1cBVWb9YPHXG.png" class="lazyload placeholder" data-srcset="https://s2.loli.net/2024/03/04/UKq1cBVWb9YPHXG.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="CREATE行为漏斗"></p><h2 id="Cue"><a href="#Cue" class="headerlink" title="Cue"></a>Cue</h2><p>线索提示，即让用户意识到某个产品或功能的存在。吸引用户的注意力并在他的脑袋中留下印象是首要条件。</p><h2 id="Reaction"><a href="#Reaction" class="headerlink" title="Reaction"></a>Reaction</h2><p>当用户在某一时刻回想起某个产品时，他会有一个感受，可能是有趣的、优雅的，也可能是枯燥的、杂乱的。而这个感受也会对用户之后的行为造成影响。</p><h2 id="Evaluation"><a href="#Evaluation" class="headerlink" title="Evaluation"></a>Evaluation</h2><p>在用户产生了使用产品的想法后，他便会开始评估利弊，使用这个软件或功能是否会给他带来价值。如果使用的时间成本或金钱成本过高，大于他使用的预期，那么用户可能会放弃使用。</p><h2 id="Ability"><a href="#Ability" class="headerlink" title="Ability"></a>Ability</h2><p>也许在上一阶段，用户觉得使用这个软件是值的，那么现在还要看他是否具有发起行动的条件，比如此时用户的网络环境较差，无法打开网页，或不知道如何进入某功能页面，这些都会导致用户行动失败。</p><h2 id="Timing"><a href="#Timing" class="headerlink" title="Timing"></a>Timing</h2><p>最后是让用户的使用具有紧迫感，如果用户满足了上述条件，但一点都不急，那他有可能想着明天再用吧，然后就忘记了。很多软件推出一些限时活动，也是为了让用户觉得这个行动不能拖延。</p><h2 id="Execute"><a href="#Execute" class="headerlink" title="Execute"></a>Execute</h2><p>在前面5层漏斗的筛选下，用户此时终于决定行动起来。</p><h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>通过CREATE行为漏斗模型，我们能够更好地理解用户在与产品或功能互动时的心理过程。从最初的线索提示到最终的行动执行，每个阶段都是用户决策和行为的关键点。利用CREATE行为漏斗模型可以帮助我们更有效地吸引用户、提升产品价值，并促使他们采取行动。</p>]]></content>
      
      
      <categories>
          
          <category> 产品 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> UX </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>操作系统答疑（一）</title>
      <link href="/2024/03/04/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AD%94%E7%96%91%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2024/03/04/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AD%94%E7%96%91%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h3 id="What-are-the-three-main-purposes-of-an-operating-system"><a href="#What-are-the-three-main-purposes-of-an-operating-system" class="headerlink" title="What are the three main purposes of an operating system?"></a><strong>What are the three main purposes of an operating system?</strong></h3><ol><li><p>The three main purposes are to provide a convenient environment for computer users to execute programs on computer hardware.</p></li><li><p>Allocate individual resources of the computer as needed to perform the required tasks. The distribution process should be as fair and reasonable as possible.</p></li><li><p>As a control program, it has two main functions: (1) to supervise the execution of user programs and prevent errors and improper use of the computer; and (2) to manage the operation and control of I&#x2F;O devices.</p></li></ol><h3 id="What-is-the-main-difficulty-that-a-programmer-must-overcome-in-writing-an-operating-system-for-a-real-time-environment"><a href="#What-is-the-main-difficulty-that-a-programmer-must-overcome-in-writing-an-operating-system-for-a-real-time-environment" class="headerlink" title="What is the main difficulty that a programmer must overcome in writing an operating system for a real-time environment?"></a><strong>What is the main difficulty that a programmer must overcome in writing an operating system for a real-time environment?</strong></h3><p>A: The main disadvantage is keeping the operating system within the time constraints of a real-time system. If the system does not complete a task within a certain period of time, it may cause the whole system to crash. Therefore, when writing an operating system for a real-time system, the author must ensure that his scheduling scheme does not allow the response time to exceed the time limit.</p><h3 id="Keeping-in-mind-the-various-definitions-of-operating-system-consider-whether-the-operating-system-should-include-applications-such-as-web-browsers-and-mail-programs-Argue-both-that-it-should-and-that-it-should-not-and-support-your-answers"><a href="#Keeping-in-mind-the-various-definitions-of-operating-system-consider-whether-the-operating-system-should-include-applications-such-as-web-browsers-and-mail-programs-Argue-both-that-it-should-and-that-it-should-not-and-support-your-answers" class="headerlink" title="Keeping in mind the various definitions of operating system, consider whether the operating system should include applications such as web browsers and mail programs. Argue both that it should and that it should not, and support your answers."></a><strong>Keeping in mind the various definitions of operating system, consider whether the operating system should include applications such as web browsers and mail programs. Argue both that it should and that it should not, and support your answers.</strong></h3><p>A: An argument in favor of including popular applications in the operating system is that if the application is embedded in the operating system, it may better take advantage of kernel features and therefore have a performance advantage over applications that run outside the kernel. However, the arguments against embedding applications in the operating system are usually dominant: </p><p>(1) applications are applications — not part of the operating system.</p><p>(2) any performance flaws running in the kernel are offset by security vulnerabilities.</p><p>(3) including applications results in a bloated operating system.</p><h3 id="How-does-the-distinction-between-kernel-mode-and-user-mode-function-as-a-rudimentary-form-of-protection-security-system"><a href="#How-does-the-distinction-between-kernel-mode-and-user-mode-function-as-a-rudimentary-form-of-protection-security-system" class="headerlink" title="How does the distinction between kernel mode and user mode function as a rudimentary form of protection (security) system?"></a><strong>How does the distinction between kernel mode and user mode function as a rudimentary form of protection (security) system?</strong></h3><p>A: The distinction between kernel mode and user mode provides a basic form of protection in the following way. Some instructions can only be executed when the CPU is in kernel mode. Similarly, a hardware device can only be accessed when the program is in kernel mode, and interrupts can only be enabled or disabled when the CPU is in kernel mode. As a result, the CPU has very limited capabilities when executing in user mode, tightening the protection of critical resources.</p><h3 id="Give-two-reasons-why-caches-are-useful-What-problems-do-they-solve-What-problems-do-they-cause-If-a-cache-can-be-made-as-large-as-the-device-for-which-it-is-caching-for-instance-a-cache-as-large-as-a-disk-why-not-make-it-that-large-and-eliminate-the-device"><a href="#Give-two-reasons-why-caches-are-useful-What-problems-do-they-solve-What-problems-do-they-cause-If-a-cache-can-be-made-as-large-as-the-device-for-which-it-is-caching-for-instance-a-cache-as-large-as-a-disk-why-not-make-it-that-large-and-eliminate-the-device" class="headerlink" title="Give two reasons why caches are useful. What problems do they solve?What problems do they cause? If a cache can be made as large as the device for which it is caching (for instance, a cache as large as a disk),why not make it that large and eliminate the device?"></a><strong>Give two reasons why caches are useful. What problems do they solve?What problems do they cause? If a cache can be made as large as the device for which it is caching (for instance, a cache as large as a disk),why not make it that large and eliminate the device?</strong></h3><p>A: Caching is useful when two or more components need to exchange data and the components perform transfers at different speeds. Caching solves the transfer problem by providing an intermediate speed buffer between components. If the fast device data value changes, the data is also in the cache and the cache must be updated. This is especially a problem on multiprocessor systems, where multiple processes may be accessing data. Component can eliminate a cache of equal size, but only if: </p><p>(a) the cache and the component have equal state preservationCapability (that is, if a component retains data when power is removed, the cache must retain the data)</p><p>(b) the cache is affordable because faster storage tends to be more expensive.</p><h3 id="Distinguish-between-the-client–server-and-peer-to-peer-models-of-distributed-systems"><a href="#Distinguish-between-the-client–server-and-peer-to-peer-models-of-distributed-systems" class="headerlink" title="Distinguish between the client–server and peer-to-peer models of distributed systems."></a><strong>Distinguish between the client–server and peer-to-peer models of distributed systems.</strong></h3><p>A: The client-server model strictly separates the roles of the client and the server. Under this model, a client requests a service provided by a server. The peer-to-peer model does not have such a strict role. In fact, all nodes in the system are considered peers, and thus can act as either clients or servers, or both. A node may request a service from another peer, or the node may actually provide such a service to other peers in the system. For example, let’s consider a shared cooking dish.The nodal system of the spectrum. Under the client-server model, all recipes are stored in the server. If the client wants to access the recipe, it must request the recipe from the specified server. With the peer-to-peer model, peer nodes can ask other peer nodes for a specified recipe. A node (or possibly a node) with the requested recipe may provide it to the requesting node. Note that each peer can be both a client (it can request recipes) and a server (it can provide recipes).</p><h3 id="In-a-multiprogramming-and-time-sharing-environment-several-users-share-the-system-simultaneously-This-situation-can-result-in-various-security-problems-a-What-are-two-such-problems-b-Can-we-ensure-the-same-degree-of-security-in-a-time-shared-machine-as-in-a-dedicated-machine-Explain-your-answer"><a href="#In-a-multiprogramming-and-time-sharing-environment-several-users-share-the-system-simultaneously-This-situation-can-result-in-various-security-problems-a-What-are-two-such-problems-b-Can-we-ensure-the-same-degree-of-security-in-a-time-shared-machine-as-in-a-dedicated-machine-Explain-your-answer" class="headerlink" title="In a multiprogramming and time-sharing environment, several users share the system simultaneously. This situation can result in various security problems. a. What are two such problems? b. Can we ensure the same degree of security in a time-shared machine as in a dedicated machine? Explain your answer."></a><strong>In a multiprogramming and time-sharing environment, several users share the system simultaneously. This situation can result in various security problems. a. What are two such problems? b. Can we ensure the same degree of security in a time-shared machine as in a dedicated machine? Explain your answer.</strong></h3><p>A:Two potential issues in multiprogramming and time-sharing environments include:</p><p>1.Data Leakage: Simultaneous access to the system by multiple users may increase the risk of data leakage. Without proper isolation measures, one user may access another user’s data, leading to information disclosure.</p><p>2.Denial of Service (DoS) Attacks: In a multi-user shared system, some users may execute malicious operations to exhaust system resources, thereby impacting the services of other users. In such cases, the system may suffer from denial of service (DoS) attacks.</p><p>Ensuring the same level of security as dedicated machines in time-sharing environments is challenging. Time-sharing systems need to serve multiple users simultaneously, allowing concurrent access to system resources. This shared resource characteristic increases the risk of attacks on the system. In contrast, dedicated machines typically grant access to only one user or a trusted group of users, enabling stricter security measures for enhanced security. While security measures such as access control, encryption, and auditing can be implemented to strengthen the security of time-sharing systems, the shared resource nature makes it impossible to guarantee the same level of security as dedicated machines.</p><h3 id="Describe-some-distributed-applications-that-would-be-appropriate-for-a-peer-to-peer-system"><a href="#Describe-some-distributed-applications-that-would-be-appropriate-for-a-peer-to-peer-system" class="headerlink" title="Describe some distributed applications that would be appropriate for a peer-to-peer system"></a><strong>Describe some distributed applications that would be appropriate for a peer-to-peer system</strong></h3><p>   A:Some distributed applications suitable for peer-to-peer systems include:</p><ol><li>File sharing applications: Allow users to share and exchange files on a peer-to-peer network, such as BitTorrent.</li><li>Blockchain applications: Utilize peer-to-peer networks to distribute and verify transaction data, such as Bitcoin and Ethereum.</li><li>Real-time communication applications: Enable users to communicate directly in real-time on a peer-to-peer network, such as Skype and WhatsApp.</li><li>Distributed computing applications: Utilize multiple nodes in a peer-to-peer network to collectively process computing tasks.</li><li>Decentralized social networks: Allow users to create profiles, share content, and engage in social interactions on a peer-to-peer network, such as Diaspora and Mastodon.</li><li>Content Delivery Networks (CDNs): Utilize peer-to-peer networks to distribute network content to improve access speed and stability, such as BitTorrent CDN.</li></ol><h3 id="Identify-several-advantages-and-several-disadvantages-of-open-source-operating-systems-Include-the-types-of-people-who-would-find-each-aspect-to-be-an-advantage-or-a-disadvantage"><a href="#Identify-several-advantages-and-several-disadvantages-of-open-source-operating-systems-Include-the-types-of-people-who-would-find-each-aspect-to-be-an-advantage-or-a-disadvantage" class="headerlink" title="Identify several advantages and several disadvantages of open-source operating systems. Include the types of people who would find each aspect to be an advantage or a disadvantage."></a><strong>Identify several advantages and several disadvantages of open-source operating systems. Include the types of people who would find each aspect to be an advantage or a disadvantage.</strong></h3><ul><li><p>A:Advantages of open-source operating systems:</p><p>1.Transparency and security: Open-source operating systems allow users to inspect the source code, enhancing transparency and security. Developers and security-conscious users find this advantageous as they can quickly identify and fix vulnerabilities. </p><p>2.Customizability: Open-source operating systems provide extensive customization options. This flexibility attracts power users, developers, and organizations needing tailored solutions to meet specific requirements. </p><p>3.Community support: Open-source projects typically have vibrant communities of developers and users who provide ongoing support, assistance, and knowledge sharing. This collaborative environment is beneficial for individuals seeking help, troubleshooting, or new features. </p><p>4.Cost-effectiveness: Open-source operating systems are often available for free, eliminating licensing costs. This cost-effectiveness is particularly advantageous for budget-conscious individuals, small businesses, educational institutions, and organizations operating in developing countries. </p><p>5.Innovation and rapid development: The openness of the development process fosters innovation and rapid iteration. Developers can freely experiment, iterate, and integrate new features, enabling continuous improvement and staying ahead.</p></li><li><p>Disadvantages of open-source operating systems:</p><p>1.Complexity and learning curve: Open-source operating systems can be highly complex, with a steep learning curve for beginners. Individuals accustomed to more user-friendly interfaces may find configuration and management challenging.</p><p>2.Limited compatibility with proprietary software: Some proprietary software may be incompatible with open-source operating systems, potentially leading to compatibility issues. Users relying on specific proprietary applications or hardware may encounter difficulties or need to seek alternative solutions.</p><p>3.Fragmentation and lack of standardization: The diverse ecosystem of open-source operating systems can lead to fragmentation and lack of standardization. This may result in compatibility issues between different distributions or versions, posing challenges for users seeking environment consistency. </p><p>4.Limited vendor support: Unlike proprietary operating systems, open-source alternatives may lack dedicated vendor support. While community support may be strong, it may not be sufficient for enterprise-level requirements or urgent issues, requiring additional support and maintenance resources. </p><p>5.Security risks: While the transparency of open-source software enhances security in many cases, it may also expose vulnerabilities to malicious users. Without proper management and timely updates, open-source operating systems may become targets for attacks, posing risks to users and organizations.</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> operating system </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在vercel上部署hexo框架的博客</title>
      <link href="/2024/03/03/%E5%9C%A8vercel%E4%B8%8A%E9%83%A8%E7%BD%B2hexo%E6%A1%86%E6%9E%B6%E7%9A%84%E5%8D%9A%E5%AE%A2%E5%8F%8A%E5%85%B6%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/"/>
      <url>/2024/03/03/%E5%9C%A8vercel%E4%B8%8A%E9%83%A8%E7%BD%B2hexo%E6%A1%86%E6%9E%B6%E7%9A%84%E5%8D%9A%E5%AE%A2%E5%8F%8A%E5%85%B6%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="在vercel上部署hexo框架的博客"><a href="#在vercel上部署hexo框架的博客" class="headerlink" title="在vercel上部署hexo框架的博客"></a>在vercel上部署hexo框架的博客</h1><h2 id="本地部署"><a href="#本地部署" class="headerlink" title="本地部署"></a>本地部署</h2><h3 id="安装Git、Node-js"><a href="#安装Git、Node-js" class="headerlink" title="安装Git、Node.js"></a>安装Git、Node.js</h3><p>Git的安装有多种方式，本文不展开讲。我使用的是<a href="https://desktop.github.com/">GitHub Desktop</a>，在windows和mac上均可下载使用。Node.js可以去<a href="https://nodejs.cn/download/">官网</a>下载相应安装包</p><h3 id="使用npm安装hexo"><a href="#使用npm安装hexo" class="headerlink" title="使用npm安装hexo"></a>使用npm安装hexo</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><h3 id="创建网站"><a href="#创建网站" class="headerlink" title="创建网站"></a>创建网站</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init [folder]</span><br></pre></td></tr></table></figure><h3 id="生成静态文件"><a href="#生成静态文件" class="headerlink" title="生成静态文件"></a>生成静态文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br></pre></td></tr></table></figure><p>也可以简写为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure><h3 id="启动服务器"><a href="#启动服务器" class="headerlink" title="启动服务器"></a>启动服务器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo serve</span><br></pre></td></tr></table></figure><p>也可以简写为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>启动后默认地址为<a href="http://localhost:4000/">http://localhost:4000/</a></p><h2 id="vercel部署"><a href="#vercel部署" class="headerlink" title="vercel部署"></a>vercel部署</h2><p>首先将存有博客代码的github仓库导入<a href="https://vercel.com/">vercel</a>，在项目的setting中设置指令（如下图）</p><p><img src="https://s2.loli.net/2024/03/03/yFnlUOHpDwQYWER.png" class="lazyload placeholder" data-srcset="https://s2.loli.net/2024/03/03/yFnlUOHpDwQYWER.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="vercel部署hexo指令"></p><p>编辑完成并save后create新的deployment即可，此时可以从vercel给的临时链接访问博客</p><h2 id="绑定域名"><a href="#绑定域名" class="headerlink" title="绑定域名"></a>绑定域名</h2><p>由于vercel提供的域名需要科学上网访问，平时使用起来不方便，因此我们需要给我们的博客一个域名和DNS解析服务。我选择了阿里云平台购买了域名。购买前需要先实名认证。</p><p>购买成功后，在vercel中setting-&gt;domains下添加购买的域名，并根据主机记录、记录类型和记录值在阿里云平台添加新的解析。</p><h2 id="关于图库"><a href="#关于图库" class="headerlink" title="关于图库"></a>关于图库</h2><p>刚开始我使用github存储图片，但国内访问速度感人，因此使用了<a href="https://sm.ms/">SM.MS</a>作为图床。为了更方便地管理图库，我下载了<a href="https://picgo.github.io/PicGo-Doc/zh/">PicGo</a>来上传图片。只需要在PicGo中添加token即可配置完成。</p><p>SM.MS的token在user-&gt;dashboard-&gt;API token中可以查看</p><h2 id="开始写作"><a href="#开始写作" class="headerlink" title="开始写作"></a>开始写作</h2><h3 id="创建新的文章"><a href="#创建新的文章" class="headerlink" title="创建新的文章"></a>创建新的文章</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure><h3 id="发表草稿"><a href="#发表草稿" class="headerlink" title="发表草稿"></a>发表草稿</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo publish [layout] &lt;filename&gt;</span><br></pre></td></tr></table></figure><h3 id="更多指令"><a href="#更多指令" class="headerlink" title="更多指令"></a><a href="https://hexo.io/zh-cn/docs/commands">更多指令</a></h3>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> vercel </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
